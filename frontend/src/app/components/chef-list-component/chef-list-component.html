<div class="container mt-4">
    <div class="d-flex mb-3 justify-content-between align-items-center">
        <h2 class="mb-0">Chef List</h2>
        <button class="btn btn-primary" (click)="refresh()">Refresh</button>
    </div>

    <input
            type="text"
            class="form-control mb-3"
            placeholder="Search chefs by name or specialty..."
            [(ngModel)]="searchQuery"
            (input)="onSearch()"
    />
  @if (loading) {
    <div class="text-secondary">Loading...</div>
  } @else {
        @if (error) {
    <div class="alert alert-danger">{{ error }}</div>}
    <table class="table table-hover">
      <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Age</th>
        <th>Level</th>
        <th>Specialty</th>
        <th>Restaurant</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (chef of chefs; track chef.compCode) {
          <tr [ngClass]="{
            'junior': chef.level === 'JUNIOR',
            'senior': chef.level === 'SENIOR',
            'master': chef.level === 'MASTER'
            }">
          <td>{{ chef.compCode }}</td>
            <td>{{ chef.name }}</td>
            <td>{{ chef.age }}</td>
            <td>{{ chef.level }}</td>
            <td>{{ chef.specialty }}</td>
            <td>{{ chef.restaurant?.name }}</td>
            <td>
              <a [routerLink]="['/chef', chef.compCode]" class="btn btn-sm btn-warning">Edit</a>
              <button (click)="deleteChef(chef.compCode)" class="btn btn-sm btn-danger ms-1">Delete</button>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="7" class="text-center">No chefs found.</td>
          </tr>
        }
      </tbody>
    </table>
  }
</div>
